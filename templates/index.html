<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User List</title>
    <style>
        
        .flash {
            text-align: center;
            margin-bottom: 1rem;
            color: #27ae60;
            font-weight: bold;
        }
    </style>
</head>
</head>
<body style="background-color: gray; background: linear-gradient(to right, #ff9966, #ff5e62); ">
    <h1>User List</h1>
    {% with messages = get_flashed_messages() %}
            {% if messages %}
                <div class="flash">{{ messages[0] }}</div>
            {% endif %}
    {% endwith %}
    <form action="{{ url_for('manage_users') }}" method="POST">
        <input type="text" name="username" placeholder="Name">
        <input type="email" name="email" placeholder="Email" required>
        <button type="submit" name="action" value="Add">Add User</button>
        <button type="submit" name="action" value="Delete">Delete User</button>
     
    </form>
      <script>
    function submitForm(action) {
        var form = document.getElementById('userForm');
        var username = document.getElementById('username').value;
        var actionInput = document.getElementById('action');
        
        actionInput.value = action;
        
        if (action === 'Add' && !username) {
            alert('Username is required for adding a new user');
            return false;
        }
        
        form.submit();
    }
    </script>
    <h2>Existing Users</h2>
    <table border="1" style="width: 100%; border-collapse: collapse; margin-top: 20px;">
     
    <ul>
        {% for user in users %}
            <li>
                {{user.id}}-{{user.username}} - {{user.email}}
                
            </li>
        {% endfor %}
    </ul>
    </table>
    
</body>
</html>